<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anonymous Letters</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0; padding: 0;
        background: #f0f2f5;
        display: flex; flex-direction: column; align-items: center;
    }
    header {
        width: 100%;
        background: #4CAF50;
        color: white;
        padding: 15px;
        display: flex; justify-content: space-between; align-items: center;
    }
    header h1 { margin: 0; font-size: 1.2em; }
    nav a { color: white; text-decoration: none; margin-left: 15px; }
    main { max-width: 600px; width: 100%; padding: 20px; }
    textarea {
        width: 100%; height: 120px; padding: 10px; font-size: 14px;
        border: 1px solid #ccc; border-radius: 8px; resize: none;
    }
    label { display: block; margin: 10px 0; }
    button {
        background: #4CAF50; color: white;
        padding: 10px 20px; border: none;
        border-radius: 8px; cursor: pointer;
    }
    .letter {
        background: white; padding: 15px; border-radius: 8px;
        margin: 10px 0; box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    footer {
        margin-top: 20px; padding: 10px; font-size: 12px; color: #666;
    }
    /* Popup styles */
    .popup {
        display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.5); justify-content: center; align-items: center;
    }
    .popup-content {
        background: white; padding: 20px; border-radius: 8px; width: 80%; max-width: 400px;
    }
    .close-btn {
        float: right; cursor: pointer; font-weight: bold; font-size: 18px;
    }
</style>
</head>
<body>

<header>
    <h1>Anonymous Letters</h1>
    <nav>
        <a href="#" id="aboutBtn">About</a>
    </nav>
</header>

<main>
    <textarea id="letterInput" placeholder="Write your letter..."></textarea>
    <label>
        <input type="checkbox" id="publicCheck"> Share publicly
    </label>
    <button onclick="sendLetter()">Send</button>

    <h3>Public Letters</h3>
    <div id="publicLetters"></div>
</main>

<footer>
    by planetvenus â€” jk feel free to share thoughts everyone!<br>
    <small>ps. iykyk this is for ;)</small>
</footer>

<!-- About Popup -->
<div class="popup" id="aboutPopup">
    <div class="popup-content">
        <span class="close-btn" id="closePopup">&times;</span>
        <h2>About This Site</h2>
        <p>This is a safe space for sharing anonymous or public letters. Be kind, respectful, and have fun.</p>
    </div>
</div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js"></script>

<script>
    // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBKoB-MttFzBvxONoG8mHWvxQyAJCHH2kU",
  authDomain: "signed-anon.firebaseapp.com",
  projectId: "signed-anon",
  storageBucket: "signed-anon.firebasestorage.app",
  messagingSenderId: "786490639449",
  appId: "1:786490639449:web:cbc7a80e9b0cb0d6141d48",
  measurementId: "G-W6WH1KD5YQ"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function sendLetter() {
        const text = document.getElementById("letterInput").value.trim();
        const isPublic = document.getElementById("publicCheck").checked;
        if (!text) return alert("Please write something first!");

        if (isPublic) {
            await db.collection("publicLetters").add({
                text,
                timestamp: new Date()
            });
        }
        document.getElementById("letterInput").value = "";
        document.getElementById("publicCheck").checked = false;
        loadPublicLetters();
    }

    async function loadPublicLetters() {
        const container = document.getElementById("publicLetters");
        container.innerHTML = "";
        const snapshot = await db.collection("publicLetters").orderBy("timestamp", "desc").get();
        snapshot.forEach(doc => {
            const div = document.createElement("div");
            div.className = "letter";
            div.textContent = doc.data().text;
            container.appendChild(div);
        });
    }

    loadPublicLetters();

    // About popup
    document.getElementById("aboutBtn").onclick = () => {
        document.getElementById("aboutPopup").style.display = "flex";
    };
    document.getElementById("closePopup").onclick = () => {
        document.getElementById("aboutPopup").style.display = "none";
    };
    window.onclick = e => {
        if (e.target === document.getElementById("aboutPopup")) {
            document.getElementById("aboutPopup").style.display = "none";
        }
    };
</script>

<!-- Live Chat Widget -->
<script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
        var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
        s1.async=true;
        s1.src='https://embed.tawk.to/YOUR_TAWKTO_ID/1gxxxxxxx';
        s1.charset='UTF-8';
        s1.setAttribute('crossorigin','*');
        s0.parentNode.insertBefore(s1,s0);
    })();
</script>

</body>
</html>
